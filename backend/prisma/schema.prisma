generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  // directUrl  = env("DATABASE_URL_DIRECT") need to add support for pg bouncer later :)
  extensions = [vector]
}

model Node {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  title     String?

  nodeParents Edge[] @relation("parent_to_child")
  nodeChildren Edge[] @relation("child_to_parent")

  @@index(id)
  @@map("nodes")
}

model Edge {
  id       Int  @id @default(autoincrement())

  parent   Node @relation("parent_to_child", fields: [parentId], references: [id])
  parentId Int
  
  child    Node @relation("child_to_parent", fields: [childId], references: [id])
  childId  Int

  @@map("edges")
}
